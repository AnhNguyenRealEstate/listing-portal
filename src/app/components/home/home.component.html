<section class="d-none d-md-block home-background">
    <div class="backdrop">
        <div class="row d-flex justify-content-center" style="padding-top: 10vh; padding-bottom: 10vh;">
            <mat-form-field color="accent" class="col-2">
                <mat-label>{{ 'search_bar.purpose' | translate }}</mat-label>
                <mat-select id="purpose" [(ngModel)]="searchCriteria.purpose">
                    <mat-option value="For Rent">{{ 'search_bar.for_rent' | translate }}</mat-option>
                    <mat-option value="For Sale">{{ 'search_bar.for_sale' | translate }}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field color="accent" class="col-2" *ngIf="searchCriteria.purpose">
                <mat-label>{{ 'search_bar.category' | translate }}</mat-label>
                <mat-select id="category" [(ngModel)]="searchCriteria.category" (selectionChange)="onCategorySelect()">
                    <mat-option value=''>{{ 'generics.any' | translate }}</mat-option>
                    <mat-option value="Apartment">{{ 'search_bar.apartment' | translate }}</mat-option>
                    <mat-option value="Villa">{{ 'search_bar.villa' | translate }}</mat-option>
                    <mat-option value="Townhouse">{{ 'search_bar.townhouse' | translate }}</mat-option>
                    <mat-option value="Commercial">{{ 'search_bar.commercial' | translate }}</mat-option>
                </mat-select>
            </mat-form-field>

            <ng-container *ngIf="searchCriteria.category && searchCriteria.category === 'Commercial'">
                <mat-form-field color="accent" class="col-2">
                    <mat-label>{{ 'search_bar.property_sizes' | translate }} (m<sup>2</sup>)</mat-label>
                    <mat-select id="propertySizes" [(ngModel)]="searchCriteria.propertySize">
                        <mat-option value=''>{{ 'generics.any' | translate }}</mat-option>
                        <mat-option *ngFor="let type of propertySizes | keyvalue" value="{{type.key}}">
                            {{type.value}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </ng-container>

            <button class="col-2" mat-button type="submit" (click)="getListings()">
                <mat-icon>search</mat-icon>
                <span>{{'home.find' | translate}}</span>
            </button>
        </div>

        <div class="row d-flex pb-2 justify-content-center" style="margin-left: 10vw; margin-right:10vw;"
            *ngIf="!featuredListings?.length">
            <div class="ms-2 col-3 ph-item" *ngFor="let i of numberOfMockListings">
                <div class="ph-col-3">
                    <div class="ph-picture"></div>
                    <div class="ph-row">
                        <div class="ph-col-6 big"></div>
                        <div class="ph-col-4 empty big"></div>
                        <div class="ph-col-2 big"></div>
                        <div class="ph-col-4"></div>
                        <div class="ph-col-8 empty"></div>
                        <div class="ph-col-6"></div>
                        <div class="ph-col-6 empty"></div>
                        <div class="ph-col-12"></div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="featuredListings?.length" class="row pb-4" style="margin-left: 10vw; margin-right: 10vw">
            <div class="col-12 pb-1" style="font-size: 1.5rem;">{{ 'home.featured' | translate }}</div>
            <mat-divider class="pb-2"></mat-divider>
            <div *ngFor="let listing of featuredListings" class="col-4 pb-2 result-card-wrapper">
                <listing-card [listing]="listing">
                </listing-card>
            </div>
        </div>

        <div class="d-flex justify-content-center pb-4">
            <a class="view-all" href="/listings">{{ 'home.view_all' | translate }}</a>
        </div>
    </div>
</section>

<section class="d-md-none background-mobile">
    <div class="container-flex pt-2">
        <div class="row d-flex justify-content-center pb-2"
            style="margin-top: 20vh; margin-left: 20px; margin-right: 20px;">
            <button class="col-5" mat-button [class.btn-active]="searchCriteria.purpose === 'For Rent'"
                (click)="findListingsForRent()">
                <span class="action-btn-text-mobile">{{ 'home.rent' | translate }}</span>
            </button>
            <div class="col-1 pt-2 d-flex justify-content-center">
                <span class="divider-mobile"> / </span>
            </div>
            <button class="col-5" mat-button [class.btn-active]="searchCriteria.purpose === 'For Sale'"
                (click)="findListingsForSale()">
                <span class="action-btn-text-mobile">{{ 'home.buy' | translate }}</span>
            </button>
        </div>
        <div class="row d-flex justify-content-center">
            <div class="col-8 backdrop-mobile">
                <mat-form-field color="accent">
                    <mat-label>{{ 'search_bar.category' | translate }}</mat-label>
                    <mat-select id="category" [(ngModel)]="searchCriteria.category">
                        <mat-option value=''>{{ 'generics.any' | translate }}</mat-option>
                        <mat-option value="Apartment">{{ 'search_bar.apartment' | translate }}</mat-option>
                        <mat-option value="Villa">{{ 'search_bar.villa' | translate }}</mat-option>
                        <mat-option value="Townhouse">{{ 'search_bar.townhouse' | translate }}</mat-option>
                        <mat-option value="Commercial">{{ 'search_bar.commercial' | translate }}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <button class="col-2 backdrop-mobile" mat-button type="submit" (click)="getListings()">
                <mat-icon>search</mat-icon>
            </button>
        </div>
    </div>
</section>

<app-footer></app-footer>